/*
 * flowplayer.js 3.2.9. The Flowplayer API
 *
 * Copyright 2009-2011 Flowplayer Oy
 *
 * This file is part of Flowplayer.
 *
 * Flowplayer is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Flowplayer is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Flowplayer.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Date: 2012-04-10 11:28:58 -0400 (Tue, 10 Apr 2012)
 * Revision: 782
 */
(function(){function a(a){console.log("$f.fireEvent",[].slice.call(a))}function b(a){if(!a||typeof a!="object")return a;var c=new a.constructor;for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d]));return c}function c(a,b){if(!a)return;var c,d=0,e=a.length;if(e===undefined){for(c in a)if(b.call(a[c],c,a[c])===!1)break}else for(var f=a[0];d<e&&b.call(f,d,f)!==!1;f=a[++d]);return a}function d(a){return document.getElementById(a)}function e(a,b,d){return typeof b!="object"?a:(a&&b&&c(b,function(b,c){if(!d||typeof c!="function")a[b]=c}),a)}function f(a){var b=a.indexOf(".");if(b!=-1){var d=a.slice(0,b)||"*",e=a.slice(b+1,a.length),f=[];return c(document.getElementsByTagName(d),function(){this.className&&this.className.indexOf(e)!=-1&&f.push(this)}),f}}function g(a){return a=a||window.event,a.preventDefault?(a.stopPropagation(),a.preventDefault()):(a.returnValue=!1,a.cancelBubble=!0),!1}function h(a,b,c){a[b]=a[b]||[],a[b].push(c)}function i(){return"_"+(""+Math.random()).slice(2,10)}function l(f,l,n){function C(){function b(a){return/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(t[0].url)&&!d()?!0:(!o.isLoaded()&&o._fireEvent("onBeforeClick")!==!1&&o.load(),g(a))}function d(){return o.hasiPadSupport&&o.hasiPadSupport()}function e(){r.replace(/\s/g,"")!==""?f.addEventListener?f.addEventListener("click",b,!1):f.attachEvent&&f.attachEvent("onclick",b):(f.addEventListener&&!d()&&f.addEventListener("click",g,!1),o.load())}$f(f)?($f(f).getParent().innerHTML="",y=$f(f).getIndex(),m[y]=o):(m.push(o),y=m.length-1),B=parseInt(f.style.height,10)||f.clientHeight,w=f.id||"fp"+i(),x=l.id||w+"_api",l.id=x,r=f.innerHTML,typeof n=="string"&&(n={clip:{url:n}}),n.playerId=w,n.clip=n.clip||{},f.getAttribute("href",2)&&!n.clip.url&&(n.clip.url=f.getAttribute("href",2)),s=new j(n.clip,-1,o),n.playlist=n.playlist||[n.clip];var a=0;c(n.playlist,function(){var b=this;typeof b=="object"&&b.length&&(b={url:""+b}),c(n.clip,function(a,c){c!==undefined&&b[a]===undefined&&typeof c!="function"&&(b[a]=c)}),n.playlist[a]=b,b=new j(b,a,o),t.push(b),a++}),c(n,function(a,b){typeof b=="function"&&(s[a]?s[a](b):h(v,a,b),delete n[a])}),c(n.plugins,function(a,b){b&&(u[a]=new k(a,b,o))});if(!n.plugins||n.plugins.controls===undefined)u.controls=new k("controls",null,o);u.canvas=new k("canvas",null,o),r=f.innerHTML,setTimeout(e,0)}var o=this,p=null,q=!1,r,s,t=[],u={},v={},w,x,y,z,A,B;e(o,{id:function(){return w},isLoaded:function(){return p!==null&&p.fp_play!==undefined&&!q},getParent:function(){return f},hide:function(a){return a&&(f.style.height="0px"),o.isLoaded()&&(p.style.height="0px"),o},show:function(){return f.style.height=B+"px",o.isLoaded()&&(p.style.height=A+"px"),o},isHidden:function(){return o.isLoaded()&&parseInt(p.style.height,10)===0},load:function(a){if(!o.isLoaded()&&o._fireEvent("onBeforeLoad")!==!1){var b=function(){r&&!flashembed.isSupported(l.version)&&(f.innerHTML=""),a&&(a.cached=!0,h(v,"onLoad",a)),flashembed(f,l,{config:n})},d=0;c(m,function(){this.unload(function(a){++d==m.length&&b()})})}return o},unload:function(a){if(r.replace(/\s/g,"")!==""){if(o._fireEvent("onBeforeUnload")===!1)return a&&a(!1),o;q=!0;try{p&&(p.fp_close(),o._fireEvent("onUnload"))}catch(b){}var c=function(){p=null,f.innerHTML=r,q=!1,a&&a(!0)};/WebKit/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)?setTimeout(c,0):c()}else a&&a(!1);return o},getClip:function(a){return a===undefined&&(a=z),t[a]},getCommonClip:function(){return s},getPlaylist:function(){return t},getPlugin:function(a){var b=u[a];if(!b&&o.isLoaded()){var c=o._api().fp_getPlugin(a);c&&(b=new k(a,c,o),u[a]=b)}return b},getScreen:function(){return o.getPlugin("screen")},getControls:function(){return o.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return o.getPlugin("logo")._fireEvent("onUpdate")}catch(a){}},getPlay:function(){return o.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(a){return a?b(n):n},getFlashParams:function(){return l},loadPlugin:function(a,b,c,d){typeof c=="function"&&(d=c,c={});var e=d?i():"_";o._api().fp_loadPlugin(a,b,c,e);var f={};f[e]=d;var g=new k(a,null,o,f);return u[a]=g,g},getState:function(){return o.isLoaded()?p.fp_getState():-1},play:function(a,b){var c=function(){a!==undefined?o._api().fp_play(a,b):o._api().fp_play()};return o.isLoaded()?c():q?setTimeout(function(){o.play(a,b)},50):o.load(function(){c()}),o},getVersion:function(){var a="flowplayer.js 3.2.9";if(o.isLoaded()){var b=p.fp_getVersion();return b.push(a),b}return a},_api:function(){if(!o.isLoaded())throw"Flowplayer "+o.id()+" not loaded when calling an API method";return p},setClip:function(a){return c(a,function(b,c){typeof c=="function"?(h(v,b,c),delete a[b]):b=="onCuepoint"&&$f(f).getCommonClip().onCuepoint(a[b][0],a[b][1])}),o.setPlaylist([a]),o},getIndex:function(){return y},bufferAnimate:function(a){return p.fp_bufferAnimate(a===undefined||a),o},_swfHeight:function(){return p.clientHeight}}),c("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var a="on"+this;if(a.indexOf("*")!=-1){a=a.slice(0,a.length-1);var b="onBefore"+a.slice(2);o[b]=function(a){return h(v,b,a),o}}o[a]=function(b){return h(v,a,b),o}}),c("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var a=this;o[a]=function(b,c){if(!o.isLoaded())return o;var d=null;return b!==undefined&&c!==undefined?d=p["fp_"+a](b,c):d=b===undefined?p["fp_"+a]():p["fp_"+a](b),d==="undefined"||d===undefined?o:d}}),o._fireEvent=function(b){typeof b=="string"&&(b=[b]);var e=b[0],f=b[1],g=b[2],h=b[3],i=0;n.debug&&a(b),!o.isLoaded()&&e=="onLoad"&&f=="player"&&(p=p||d(x),A=o._swfHeight(),c(t,function(){this._fireEvent("onLoad")}),c(u,function(a,b){b._fireEvent("onUpdate")}),s._fireEvent("onLoad"));if(e=="onLoad"&&f!="player")return;e=="onError"&&(typeof f=="string"||typeof f=="number"&&typeof g=="number")&&(f=g,g=h);if(e=="onContextMenu"){c(n.contextMenu[f],function(a,b){b.call(o)});return}if(e=="onPluginEvent"||e=="onBeforePluginEvent"){var k=f.name||f,l=u[k];if(l)return l._fireEvent("onUpdate",f),l._fireEvent(g,b.slice(3));return}if(e=="onPlaylistReplace"){t=[];var m=0;c(f,function(){t.push(new j(this,m++,o))})}if(e=="onClipAdd"){if(f.isInStream)return;f=new j(f,g,o),t.splice(g,0,f);for(i=g+1;i<t.length;i++)t[i].index++}var q=!0;if(typeof f=="number"&&f<t.length){z=f;var r=t[f];r&&(q=r._fireEvent(e,g,h));if(!r||q!==!1)q=s._fireEvent(e,g,h,r)}return c(v[e],function(){q=this.call(o,f,g),this.cached&&v[e].splice(i,1);if(q===!1)return!1;i++}),q};if(typeof f=="string"){var D=d(f);if(!D)throw"Flowplayer cannot access element: "+f;f=D,C()}else C()}function n(a){this.length=a.length,this.each=function(b){c(a,b)},this.size=function(){return a.length};var b=this;for(name in l.prototype)b[name]=function(){var a=arguments;b.each(function(){this[name].apply(this,a)})}}var j=function(a,b,d){var f=this,g={},j={};f.index=b,typeof a=="string"&&(a={url:a}),e(this,a,!0),c("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var a="on"+this;if(a.indexOf("*")!=-1){a=a.slice(0,a.length-1);var c="onBefore"+a.slice(2);f[c]=function(a){return h(j,c,a),f}}f[a]=function(b){return h(j,a,b),f},b==-1&&(f[c]&&(d[c]=f[c]),f[a]&&(d[a]=f[a]))}),e(this,{onCuepoint:function(a,c){if(arguments.length==1)return g.embedded=[null,a],f;typeof a=="number"&&(a=[a]);var e=i();return g[e]=[a,c],d.isLoaded()&&d._api().fp_addCuepoints(a,b,e),f},update:function(a){e(f,a),d.isLoaded()&&d._api().fp_updateClip(a,b);var c=d.getConfig(),g=b==-1?c.clip:c.playlist[b];e(g,a,!0)},_fireEvent:function(a,h,i,k){if(a=="onLoad")return c(g,function(a,c){c[0]&&d._api().fp_addCuepoints(c[0],b,a)}),!1;k=k||f;if(a=="onCuepoint"){var l=g[h];if(l)return l[1].call(d,k,i)}h&&"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(a)!=-1&&(e(k,h),h.metaData&&(k.duration?k.fullDuration=h.metaData.duration:k.duration=h.metaData.duration));var m=!0;return c(j[a],function(){m=this.call(d,k,h,i)}),m}});if(a.onCuepoint){var k=a.onCuepoint;f.onCuepoint.apply(f,typeof k=="function"?[k]:k),delete a.onCuepoint}c(a,function(b,c){typeof c=="function"&&(h(j,b,c),delete a[b])}),b==-1&&(d.onCuepoint=this.onCuepoint)},k=function(a,b,d,f){var g=this,h={},j=!1;f&&e(h,f),c(b,function(a,c){typeof c=="function"&&(h[a]=c,delete b[a])}),e(this,{animate:function(c,e,f){if(!c)return g;typeof e=="function"&&(f=e,e=500);if(typeof c=="string"){var j=c;c={},c[j]=e,e=500}if(f){var k=i();h[k]=f}return e===undefined&&(e=500),b=d._api().fp_animate(a,c,e,k),g},css:function(c,f){if(f!==undefined){var h={};h[c]=f,c=h}return b=d._api().fp_css(a,c),e(g,b),g},show:function(){return this.display="block",d._api().fp_showPlugin(a),g},hide:function(){return this.display="none",d._api().fp_hidePlugin(a),g},toggle:function(){return this.display=d._api().fp_togglePlugin(a),g},fadeTo:function(b,c,e){typeof c=="function"&&(e=c,c=500);if(e){var f=i();h[f]=e}return this.display=d._api().fp_fadeTo(a,b,c,f),this.opacity=b,g},fadeIn:function(a,b){return g.fadeTo(1,a,b)},fadeOut:function(a,b){return g.fadeTo(0,a,b)},getName:function(){return a},getPlayer:function(){return d},_fireEvent:function(b,f,i){if(b=="onUpdate"){var k=d._api().fp_getPlugin(a);if(!k)return;e(g,k),delete g.methods,j||(c(k.methods,function(){var b=""+this;g[b]=function(){var c=[].slice.call(arguments),e=d._api().fp_invoke(a,b,c);return e==="undefined"||e===undefined?g:e}}),j=!0)}var l=h[b];if(l){var m=l.apply(g,f);return b.slice(0,1)=="_"&&delete h[b],m}return g}})},m=[];window.flowplayer=window.$f=function(){var a=null,g=arguments[0];if(!arguments.length)return c(m,function(){if(this.isLoaded())return a=this,!1}),a||m[0];if(arguments.length==1)return typeof g=="number"?m[g]:g=="*"?new n(m):(c(m,function(){if(this.id()==g.id||this.id()==g||this.getParent()==g)return a=this,!1}),a);if(arguments.length>1){var h=arguments[1],i=arguments.length==3?arguments[2]:{};typeof h=="string"&&(h={src:h}),h=e({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:!1},h);if(typeof g=="string"){if(g.indexOf(".")!=-1){var j=[];return c(f(g),function(){j.push(new l(this,b(h),b(i)))}),new n(j)}var k=d(g);return new l(k!==null?k:b(g),b(h),b(i))}if(g)return new l(g,b(h),b(i))}return null},e(window.$f,{fireEvent:function(){var a=[].slice.call(arguments),b=$f(a[0]);return b?b._fireEvent(a.slice(1)):null},addPlugin:function(a,b){return l.prototype[a]=b,$f},each:c,extend:e}),typeof jQuery=="function"&&(jQuery.fn.flowplayer=function(a,c){if(!arguments.length||typeof arguments[0]=="number"){var d=[];return this.each(function(){var a=$f(this);a&&d.push(a)}),arguments.length?d[arguments[0]]:new n(d)}return this.each(function(){$f(this,b(a),c?b(c):{})})})})(),function(){function f(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function g(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d]));return c}function j(c,d,e){if(h.isSupported(d.version))c.innerHTML=h.getHTML(d,e);else if(d.expressInstall&&h.isSupported([6,65]))c.innerHTML=h.getHTML(f(d,{src:d.expressInstall}),{MMredirectURL:encodeURIComponent(location.href),MMplayerType:"PlugIn",MMdoctitle:document.title});else{c.innerHTML.replace(/\s/g,"")||(c.innerHTML="<h2>Flash version "+d.version+" or greater is required</h2><h3>"+(i[0]>0?"Your version is "+i:"You have no flash plugin installed")+"</h3>"+(c.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+b+"'>here</a></p>"),c.tagName=="A"&&(c.onclick=function(){location.href=b}));if(d.onFail){var g=d.onFail.call(this);typeof g=="string"&&(c.innerHTML=g)}}a&&(window[d.id]=document.getElementById(d.id)),f(this,{getRoot:function(){return c},getOptions:function(){return d},getConf:function(){return e},getApi:function(){return c.firstChild}})}var a=document.all,b="http://www.adobe.com/go/getflashplayer",c=typeof jQuery=="function",d=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,e={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(a,b,c){typeof a=="string"&&(a=document.getElementById(a.replace("#","")));if(!a)return;return typeof b=="string"&&(b={src:b}),new j(a,f(f({},e),b),c)};var h=f(window.flashembed,{conf:e,getVersion:function(){var a,b;try{b=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(c){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a&&a.GetVariable("$version")}catch(e){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b=a&&a.GetVariable("$version")}catch(f){}}}return b=d.exec(b),b?[b[1],b[3]]:[0,0]},asString:function(a){if(a===null||a===undefined)return null;var b=typeof a;b=="object"&&a.push&&(b="array");switch(b){case"string":return a=a.replace(new RegExp('(["\\\\])',"g"),"\\$1"),a=a.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+a+'"';case"array":return"["+g(a,function(a){return h.asString(a)}).join(",")+"]";case"function":return'"function()"';case"object":var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push('"'+d+'":'+h.asString(a[d]));return"{"+c.join(",")+"}"}return String(a).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(b,c){b=f({},b);var d='<object width="'+b.width+'" height="'+b.height+'" id="'+b.id+'" name="'+b.id+'"';b.cachebusting&&(b.src+=(b.src.indexOf("?")!=-1?"&":"?")+Math.random()),b.w3c||!a?d+=' data="'+b.src+'" type="application/x-shockwave-flash"':d+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',d+=">";if(b.w3c||a)d+='<param name="movie" value="'+b.src+'" />';b.width=b.height=b.id=b.w3c=b.src=null,b.onFail=b.version=b.expressInstall=null;for(var e in b)b[e]&&(d+='<param name="'+e+'" value="'+b[e]+'" />');var g="";if(c){for(var i in c)if(c[i]){var j=c[i];g+=i+"="+(/function|object/.test(typeof j)?h.asString(j):j)+"&"}g=g.slice(0,-1),d+='<param name="flashvars" value=\''+g+"' />"}return d+="</object>",d},isSupported:function(a){return i[0]>a[0]||i[0]==a[0]&&i[1]>=a[1]}}),i=h.getVersion();c&&(jQuery.tools=jQuery.tools||{version:"3.2.9"},jQuery.tools.flashembed={conf:e},jQuery.fn.flashembed=function(a,b){return this.each(function(){$(this).data("flashembed",flashembed(this,a,b))})})}();